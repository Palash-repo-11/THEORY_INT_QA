ğŸ§  LOAD HANDLING (DETAILED SYSTEM DESIGN GUIDE)

1ï¸âƒ£ What is Load?

ğŸ”¹ Simple Definition
   â¡ï¸ Load is the amount of work a system must handle at a given time.

Examples of Load
   âºï¸ Number of users
   âºï¸ Requests per second (RPS)
   âºï¸ Concurrent connections
   âºï¸ Data volume (MB/GB)

ğŸ“Š Example
   âºï¸ 100 users â†’ low load
   âºï¸ 1 million users â†’ high load
ğŸ“Œ Load â‰  Traffic only
It also includes:
   âºï¸ DB queries
   âºï¸ CPU usage
   âºï¸ Memory
   âºï¸ Network bandwidth

2ï¸âƒ£ Why Load Handling is Critical 
    If load is not handled properly:
        âŒ Server crashes
        âŒ Slow response
        âŒ Timeouts
        âŒ Data inconsistency
    ğŸ‘‰ Good systems fail gracefully

3ï¸âƒ£ Load Handling Strategies (High Level)
        Client
        â†“
        Load Balancer
        â†“
        Multiple Servers
        â†“
        Cache / DB / Queue

Key techniques:
   âºï¸ Load balancing
   âºï¸ Caching
   âºï¸ Rate limiting
   âºï¸ Asynchronous processing
   âºï¸ Auto-scaling
   âºï¸ Backpressure

4ï¸âƒ£ Load Balancers (Core Concept)--
ğŸ”¹ What is a Load Balancer?
   â¡ï¸ A load balancer (LB) distributes incoming traffic across multiple backend servers.

Why We Need It :
   âºï¸ Avoid single point of failure
   âºï¸ Improve performance
   âºï¸ Enable horizontal scaling

5ï¸âƒ£ Types of Load Balancers ---

ğŸŸ¦ L4 Load Balancer (Transport Layer)
Works on:
   âºï¸ IP
   âºï¸ Port
   âºï¸ TCP/UDP
   âºï¸ Example
   âºï¸ AWS NLB
   âºï¸ HAProxy (TCP mode)
Characteristics
    âœ”ï¸ Very fast
    âœ”ï¸ Low latency
    âŒ No understanding of HTTP

ğŸŸ© L7 Load Balancer (Application Layer)
Works on:
   âºï¸ URL
   âºï¸ Headers
   âºï¸ Cookies
   âºï¸ HTTP method
Example
   âºï¸ Nginx
   âºï¸ AWS ALB
   âºï¸ Envoy
Characteristics
    âœ”ï¸ Smart routing
    âœ”ï¸ SSL termination
    âŒ Slightly slower

ğŸ§  Interview Line
   â¡ï¸ â€œL4 is faster, L7 is smarter.â€

6ï¸âƒ£ Load Balancing Algorithms --
ğŸ” Round Robin
    âºï¸ Requests distributed sequentially
    âœ”  Simple
    âŒ Ignores server load
âš–ï¸ Least Connections
   âºï¸ Server with fewest active connections
    âœ” Better for uneven load
ğŸ“Š Weighted Round Robin
   âºï¸ Powerful servers get more traffic
ğŸ§  Hash-Based
   âºï¸ Same user â†’ same server
    âœ” Useful for sessions

7ï¸âƒ£ Reverse Proxy vs Load Balancer ---
    | Reverse Proxy           | Load Balancer       |
    | ----------------------- | ------------------- |
    | Sits in front of server | Distributes traffic |
    | Can cache               | Focus on routing    |
    | Nginx, Apache           | HAProxy, ALB        |
ğŸ“Œ One tool can do both.

8ï¸âƒ£ Sticky Sessions (Session Affinity)---
   â¡ï¸ Same user always routed to same server
Why Needed
   âºï¸ In-memory session storage
Problems
    âŒ Breaks scaling
    âŒ Bad for failover
    ğŸ“Œ Better solution : Store session in Redis

9ï¸âƒ£ Rate Limiting (Protect System) ---
ğŸ”¹ What is Rate Limiting?
   â¡ï¸ Restrict number of requests per user/IP in a time window
Example
   âºï¸ 100 requests/minute/user

Algorithms
    ğŸª£ Token Bucket
        âºï¸ Tokens refill over time
        âºï¸ Allows bursts
    ğŸª£ Leaky Bucket
        âºï¸ Fixed outflow rate
    ğŸ“Œ Used by:
        âºï¸ APIs
        âºï¸ Login systems
        âºï¸ Payment services

ğŸ”Ÿ Caching for Load Reduction --
Where Cache Helps
    âºï¸ Reduce DB hits
    âºï¸ Faster responses
Types
    âºï¸ Browser cache
    âºï¸ CDN cache
    âºï¸ Server cache (Redis)
â¡ï¸ Client â†’ Cache â†’ Server â†’ DB

ğŸ“Œ Cache reduces load exponentially

1ï¸âƒ£1ï¸âƒ£ Asynchronous Load Handling --
Problem
    âºï¸ Synchronous processing blocks server

Solution â†’ Queues
    â¡ï¸ Client â†’ API â†’ Queue â†’ Worker

Examples
    âºï¸ Email sending
    âºï¸ Video processing
    âºï¸ Report generation
Tools:
    âºï¸ RabbitMQ
    âºï¸ Kafka
    âºï¸ SQS

1ï¸âƒ£2ï¸âƒ£ Auto Scaling --
ğŸ”¹ Horizontal Auto Scaling
   âºï¸ Add/remove servers based on:
       âºï¸ CPU
       âºï¸ Memory
       âºï¸ RPS
ğŸ“Œ Cloud-native feature

ğŸ”¹ Vertical Scaling
   âºï¸ Increase server size
    âŒ Limited
    âŒ Expensive

1ï¸âƒ£3ï¸âƒ£ Backpressure (Advanced Concept) ---
    â¡ï¸ System signals clients to slow down

Techniques
   âºï¸ 429 Too Many Requests
   âºï¸ Queue limits
   âºï¸ Circuit breakers

1ï¸âƒ£4ï¸âƒ£ Load Handling in Real Systems ---

Example: URL Shortener
    | Component    | Strategy    |
    | ------------ | ----------- |
    | Redirect API | CDN + Cache |
    | Write API    | Rate limit  |
    | DB           | Sharding    |
    | Analytics    | Async queue |

Example: Instagram
   âºï¸ CDN for media
   âºï¸ L7 load balancer
   âºï¸ Redis for cache
   âºï¸ Kafka for async tasks


ğŸ§  Architect Thinking Checklist
When designing load handling:
   1> Where is traffic highest?
   2> Read-heavy or write-heavy?
   3> Can it be cached?
   4> Can it be async?
   5> What happens on overload?


ğŸ¯ Interview-Ready Summary
ğŸ“‹ â€œLoad handling is achieved through a combination of load balancing, caching, rate limiting, asynchronous processing, and auto-scaling. A well-designed system distributes traffic, prevents overload, and degrades gracefully under extreme load.â€


âœ… Quick Exercise (Important)
Answer this:
    A login API is getting brute-force attacks.
    Which 3 load-handling techniques will you apply and where?