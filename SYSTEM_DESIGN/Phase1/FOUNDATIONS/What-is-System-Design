1ï¸âƒ£ What is System Design?
----
ğŸ”¹ Simple Definition
System Design is the process of defining the architecture, components, data flow, and trade-offs of a system that solves a problem at scale.

ğŸ‘‰ Not about writing code, but about:
How systems communicate
How data is stored
How the system handles millions of users
How it fails and recovers

ğŸ§  Think Like an Architect (Mindset Shift)

| Coder Thinks            | Architect Thinks        |
| ----------------------- | ----------------------- |
| How to write a function | How services interact   |
| How to optimize logic   | How to scale traffic    |
| How to fix bugs         | How to prevent failures |
| One user                | Millions of users       |

2ï¸âƒ£ Functional vs Non-Functional Requirements
----
    This is ALWAYS the first interview step.

âœ… Functional Requirements (WHAT the system does)
   â¡ï¸ Features the system must provide
Examples:
   âºï¸ User can sign up / login
   âºï¸ User can upload images
   âºï¸ User can send messages
   âºï¸ User can like a post

ğŸ“Œ If you remove it â†’ product is broken.

âš™ï¸ Non-Functional Requirements (HOW WELL it works)
   â¡ï¸ Quality attributes of the system

Core Non-Functional Requirements:
    âºï¸ Scalability
    âºï¸ Availability
    âºï¸ Reliability
    âºï¸ Performance
    âºï¸ Security
    âºï¸ Consistency

ğŸ“Œ If you remove these â†’ product works but badly

ğŸ§© Example: Instagram
Functional ---
    âºï¸ Upload photos
    âºï¸ Like, comment
    âºï¸ Follow users

Non-Functional ---
    âºï¸ Loads fast (< 200ms)
    âºï¸ 99.99% uptime
    âºï¸ Handles millions of users
    âºï¸ Images always available

ğŸ’¡ Interview Tip:
Always say:
    â€œLet me clarify functional and non-functional requirements first.â€


3ï¸âƒ£ Scalability, Reliability, Availability
----
These are often confusedâ€”letâ€™s separate them clearly.

ğŸ“ˆ Scalability
    Ability to handle growth (users, traffic, data)

Example:
    âºï¸ 1K users today
    âºï¸ 10M users tomorrow
    âºï¸ System still works without rewriting everything

Types:
   âºï¸ Traffic scalability
   âºï¸ Data scalability
   âºï¸ User scalability
ğŸ“Œ Scaling â‰  Performance optimization

ğŸ›¡ï¸ Reliability
    System works correctly over time

Means:
   âºï¸ No data loss
   âºï¸ Correct responses
   âºï¸ Same request â†’ same result

Example:
   âºï¸ Payment deducted once
   âºï¸ Messages not duplicated

ğŸ“Œ A fast system that gives wrong data is unreliable

ğŸŸ¢ Availability
    System is accessible when users need it

Measured as:
    âºï¸ 99.9% â†’ ~8.7 hrs downtime/year
    âºï¸ 99.99% â†’ ~52 min/year

Example:
   âºï¸ WhatsApp opens even during peak load

ğŸ“Œ A system can be available but unreliable
(returns errors but still â€œupâ€)

ğŸ§  Key Difference (Very Important) ----
    | Concept      | Question it answers |
    | ------------ | ------------------- |
    | Scalability  | Can it grow?        |
    | Reliability  | Is it correct?      |
    | Availability | Is it up?           |

4ï¸âƒ£ Latency vs Throughput 
-----
    This is performance thinking.

â±ï¸ Latency
    Time taken for ONE request

Example:
   âºï¸ API response time = 120ms
   âºï¸ Page load time = 300ms

ğŸ“Œ User experience metric

ğŸš€ Throughput
    Number of requests handled per unit time

Example:
   âºï¸ 10,000 requests/second
   âºï¸ 1 million messages/minute

ğŸ“Œ System capacity metric

ğŸ§© Real Example: Toll Booth
   âºï¸ Latency â†’ Time one car takes to pass
   âºï¸ Throughput â†’ Cars per hour

ğŸ‘‰ Add more booths:
   âºï¸ Latency â†“
   âºï¸ Throughput â†‘

âš ï¸ Trade-off
   âºï¸ Low latency â‰  high throughput
   âºï¸ High throughput systems often batch requests

5ï¸âƒ£ CAP Theorem (Interview Favorite)
    In a distributed system, you can only guarantee 2 of 3:

ğŸ”º CAP
   âºï¸ C â€“ Consistency
   âºï¸ A â€“ Availability
   âºï¸ P â€“ Partition Tolerance

ğŸ§  Definitions (Clear & Simple)
Consistency
   âºï¸ All nodes return same data
   âºï¸ Latest write visible everywhere
Availability
   âºï¸ Every request gets a response
   âºï¸ Even if data is stale
Partition Tolerance
   âºï¸ System works even if network fails
   âºï¸ Messages lost or delayed between nodes

ğŸ“Œ P is mandatory in distributed systems.

â— Reality
You choose between:
   âºï¸ CP (Consistency + Partition)
   âºï¸ AP (Availability + Partition)

ğŸ§© Real Examples
ğŸ¦ Banking System â†’ CP
   âºï¸ Wrong balance = disaster
   âºï¸ Might reject request if unsure
ğŸ“± Social Media â†’ AP
   âºï¸ Feed can be slightly stale
   âºï¸ App must always load
âš ï¸ Interview Line
    â€œIn real systems, CAP is not binaryâ€”itâ€™s a spectrum.â€


6ï¸âƒ£ Vertical vs Horizontal Scaling
-----
ğŸ—ï¸ Vertical Scaling (Scale UP)
        â¡ï¸ Increase power of one machine
   âºï¸ Add RAM
   âºï¸ Add CPU
   âºï¸ Bigger server

Pros
    âœ” Simple
    âœ” No code change
Cons
    âŒ Hardware limit
    âŒ Single point of failure

ğŸŒ Horizontal Scaling (Scale OUT)
         â¡ï¸ Add more machines
   âºï¸ Multiple servers
   âºï¸ Load balancer

Pros
    âœ” High availability
    âœ” Infinite scaling
Cons
    âŒ Complex
    âŒ Needs stateless design

ğŸ§© Real World
   âºï¸ Startups â†’ Vertical
   âºï¸ Big tech â†’ Horizontal

ğŸ§  Architect Thinking Summary
When given a system:
   1> Identify functional requirements
   2> Define non-functional goals
   3> Decide CAP preference
   4> Plan scaling strategy
   5> Accept trade-offs


âœ… Mini Exercise (IMPORTANT)
Answer this in 2â€“3 lines:
   â¡ï¸ Design a URL shortener â€“ what are 2 functional and 2 non-functional requirements?
------
ğŸ”— What is a URL Shortener?
ğŸ”¹ Simple Definition
   â¡ï¸ A URL shortener is a system that converts a long URL into a short, unique URL, which redirects users to the original long URL when accessed.

ğŸ§© Example
Long URL
    https://www.amazon.in/gp/product/B0C9X9Y7KQ/ref=something-very-long
Short URL
    https://bit.ly/3Xk9PqA

ğŸ‘‰ When a user opens the short URL, the system:
   âºï¸ Receives the request
   âºï¸ Finds the original long URL
   âºï¸ Redirects the user to it

ğŸ§  Why Do We Need URL Shorteners?
1ï¸âƒ£ Convenience
   âºï¸ Easy to share
   âºï¸ Fits in messages, tweets, QR codes
2ï¸âƒ£ Tracking & Analytics
   âºï¸ Click count
   âºï¸ Location
   âºï¸ Device
   âºï¸ Time of access
3ï¸âƒ£ Branding
   âºï¸ Custom domains
   âºï¸ amzn.to, bit.ly, t.co

ğŸ§© Real-World Examples
   âºï¸ Bitly
   âºï¸ TinyURL
   âºï¸ Google URL Shortener (deprecated)
   âºï¸ t.co (Twitter/X)

ğŸ”„ How a URL Shortener Works (High Level Flow)
    User â†’ Shorten URL API â†’ Generate unique key â†’ Store mapping â†’ Return short URL

    User â†’ Open short URL â†’ Lookup key â†’ Get long URL â†’ Redirect (301/302)

ğŸ§± Core Components (Very High Level)

1> API Server
   âºï¸ Accepts long URLs
   âºï¸ Handles redirects
2> Database
   âºï¸ Stores:
        short_key â†’ long_url
3> Redirect Service
   âºï¸ Extremely fast
   âºï¸ Read-heavy system
4> Optional
   âºï¸ Cache (Redis)
   âºï¸ Analytics service

ğŸ§  Now Answer the Original Question Properly
ğŸ”¹ Functional Requirements (WHAT it does)
   1> Generate a short URL for a given long URL
   2> Redirect users from short URL â†’ original URL
(Advanced optional)
   âºï¸ Custom aliases
   âºï¸ Expiry time
   âºï¸ Click tracking

âš™ï¸ Non-Functional Requirements (HOW WELL it works)
    1>Low latency redirects (< 50 ms)
    2>High availability (always accessible)
(Advanced)
   âºï¸ Scalable to billions of URLs
   âºï¸ Durable storage
   âºï¸ No collisions

ğŸ¯ Interview-Ready Definition (Say This)
    â€œA URL shortener is a service that maps long URLs to short unique identifiers and redirects incoming requests to the original URL with low latency, high availability, and massive read scalability.â€